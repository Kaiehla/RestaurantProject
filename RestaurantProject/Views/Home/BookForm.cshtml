@model ReserveForm
@{
    ViewData["Title"] = "Book Form";

    Layout = "_Layout-Filled";
}

<div class="container">
    <div class="py-5 text-center">
        <h2>Reservation form</h2>
        <p class="lead">This is the reservation form</p>
    </div>

    <form class="needs-validation" method="post" asp-action="SubmitReservation">
    <div class="row g-5">
        <!--RESERVATION SUMMARY-->
        <div class="col-md-5 col-lg-4 order-md-last">
            <h5 class="d-flex justify-content-between align-items-center mb-3">
                <span class="text-primary">Your Reservation Summary</span>
            </h5>
            <ul class="list-group mb-3">
                <li class="list-group-item d-flex justify-content-between lh-sm">
                    <div>
                        <h6 class="my-0">Reservation Date</h6>
                            <input class="form-control" id="datepicker" placeholder="July 10, 2023" value="" required asp-for="ReservationDate">
                    </div>
                </li>
                <li class="list-group-item d-flex justify-content-between lh-sm">
                    <div>
                        <h6 class="my-0">Reservation Time</h6>
                            <input class="form-control" id="timepicker" placeholder="10:30PM" value="" required asp-for="ReservationTime">
                    </div>
                </li>
                <li class="list-group-item d-flex justify-content-between lh-sm">
                    <div>
                        <h6 class="my-0">Chosen Package</h6>

                        @* @Html.DropDownListFor(pm => pm.PackageName, Model.PackageNames, new {@class="form-select", @id="dropdown", @data_id=Model.Price}) *@
                        <select class="form-select" id="packageName" name="packageName" asp-for="PackageName">
                            @for(int i = 0; i < Model.PackageNames.Count; i++)
                            {
                                <option value=@Model.PackageNames[i] data-id="@Model.Prices[i]">@Model.PackageNames[i]</option>
                            }
                        </select>
                           @*  <input type="text" class="form-control" id="packageId" placeholder="@Model" value="@packageName" required asp-for="PackageName" /> *@
                    </div>
                </li>
                <li class="list-group-item d-flex justify-content-between lh-sm">
                    <div>
                        <h6 class="my-0">Number of Guest</h6>
                            <input type="number" class="form-control" id="numGuest" placeholder="0" value="" required asp-for="NumOfGuest" />
                    </div>
                </li>
            </ul>
            <ul class="list-group mb-3">
                <li class="list-group-item d-flex justify-content-between lh-sm">
                    <div>
                        <h6 class="my-0">Price (in Philippine Pesos)</h6>
                            <input type="number" class="form-control" id="Price" placeholder="0.00" value="" asp-for="Price" readonly />
                    </div>
                </li>
            </ul>
        </div>

        <!--CLIENT DETAILS-->
        <div class="col-md-7 col-lg-8">
            <h4 class="mb-3">Client details</h4>
                <div class="row g-3">
                    <div class="col-sm-6">
                        <label for="firstName" class="form-label">First name</label>
                        <input type="text" class="form-control" id="firstName" placeholder="Juan" value="" required asp-for="FirstName">
                        <div class="invalid-feedback">
                            Valid first name is required.
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <label for="lastName" class="form-label">Last name</label>
                        <input type="text" class="form-control" id="Price" placeholder="Dimagiba" value="" required asp-for="LastName">
                        <div class="invalid-feedback">
                            Valid last name is required.
                        </div>
                    </div>


                    <div class="col-12">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" placeholder="you@example.com" required asp-for="Email">
                        <div class="invalid-feedback">
                            Please enter a valid email address for shipping updates.
                        </div>
                    </div>

                    <div class="col-12">
                        <label for="address" class="form-label">Address</label>
                        <input type="text" class="form-control" id="address" placeholder="1234 Main St" required asp-for="CityAdd">
                        <div class="invalid-feedback">
                            Please enter your city address.
                        </div>
                    </div>

                    <div class="col-12">
                        <label for="number" class="form-label">Phone Number</label>
                        <input type="text" class="form-control" id="number" placeholder="091234567891" required asp-for="PhoneNumber">
                        <div class="invalid-feedback">
                            Please enter your shipping address.
                        </div>
                    </div>
                </div>
            <br>
            <button class="w-100 btn btn-dark btn-lg mb-5" type="submit" @* asp-action="ConfirmBook" *@>Continue to checkout</button>
            <br/>
            <br />
            <br />
            <br />
        </div>
    </div>
    </form>
</div>

@section Scripts{
    <script>
        //When an item is selected in the dropdown menu, get the data-id attribute (which contains the price of the package) and display the price
        $(function () {
            $('#packageName').change(function () {
                var option = $(this.options[this.selectedIndex]);
                const price = option.attr('data-id');
                $('#Price').val(price);
            });
        })
        //When the page has loaded, get the price of the package selected in the homepage by using the data-id attribute
        $(function () {
            $(document).ready(function () {
                var select = document.getElementById('packageName');
                var option = $(select.options[select.selectedIndex]);
                const price = option.attr('data-id');
                $('#Price').val(price);
            });
        })
    </script>
}

